# Verificar con Sonarqube
sonar-job:
  stage: sonar
  rules:
    - if: $CI_COMMIT_REF_NAME == "develop" 
      allow_failure: true
    - if: $CI_COMMIT_REF_NAME == "master" 
      allow_failure: false 
  cache:
    paths:
      - ./.m2/repository
      - ./.sonar/cache
  script:
    - 'echo "=============================================================================================="'
    - 'echo "Ejecutando etapa SONAR en branch $CI_COMMIT_REF_NAME"'
    - 'echo "=============================================================================================="'
    - mvn verify sonar:sonar -DskipTests -Dsonar.qualitygate.wait=true

