#########################################################################################################
# Pasar Sonarqube para verificar la calidad del codigo. Se ejecuta para cualquier push, para evitar
# pasar a etapas posteriores si no se pasan los niveles de calidad requeridos.
#
# Vers  Por Fecha      Notas
# ----- --- ---------- ----------------------------------------------------------------------------------
# 1.0.0 FNG 26/07/2022 Version inicial
#
#########################################################################################################
sonar-job:
  stage: sonar
  cache:
    paths:
      - ./.m2/repository
      - ./.sonar/cache
  script:
    - 'echo "=============================================================================================="'
    - 'echo "Ejecutando etapa SONAR en branch $CI_COMMIT_REF_NAME"'
    - 'echo "=============================================================================================="'
    - mvn validate sonar:sonar -DskipTests -Dsonar.qualitygate.wait=true -Dsonar.java.skipUnchanged=false

